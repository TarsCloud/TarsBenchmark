(function(t){function e(e){for(var s,i,o=e[0],l=e[1],c=e[2],d=0,h=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&h.push(n[i][0]),n[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},n={index:0},r=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/plugins/base/benchmark/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("b635")},"045a":function(t,e,a){"use strict";var s=a("148c"),n=a.n(s);n.a},"148c":function(t,e,a){},"33c3":function(t,e,a){"use strict";var s=a("4d7d"),n=a.n(s);n.a},"4d7d":function(t,e,a){},6609:function(t,e,a){},a082:function(t,e,a){},b635:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("a026"),n=a("00e7"),r=a.n(n),i=a("5c96"),o=a.n(i),l=(a("a082"),a("1861")),c=a.n(l),u=(a("8c47"),a("6609"),a("0c80")),d=a.n(u),h=a("c400"),m=a.n(h);function p(){this.loading=null}s["default"].use(c.a,{locale:{en:m.a,cn:d.a}[r.a.get("locale")||"cn"]||d.a}),p.prototype.show=function(t){this.loading&&this.hide();var e=i["Loading"].service({fullscreen:!0,text:t||"Loading",background:"rgba(0,0,0,0)"});return this.loading=e,this},p.prototype.hide=function(){return this.loading&&(this.loading.close(),this.loading=null),this},p.show=function(t){return p._loading||(p._loading=new p),p._loading.show(t)},p.hide=function(){return p._loading||(p._loading=new p),p._loading.hide()},Object.defineProperty(s["default"].prototype,"$Loading",{get:function(){return this._loading||(this._loading=new p),this._loading},set:function(t){}}),Object.defineProperty(s["default"].prototype,"$loading",{get:function(){return this._loading||(this._loading=new p),this._loading},set:function(t){}});var f={error:function(t){s["default"].prototype.$message({showClose:!0,message:t,type:"error"})},success:function(t){s["default"].prototype.$message({showClose:!0,message:t,type:"success"})},warning:function(t){s["default"].prototype.$message({showClose:!0,message:t,type:"warning"})}};Object.defineProperty(s["default"].prototype,"$tip",{get:function(){return f},set:function(t){}});a("99af"),a("4160"),a("6d93"),a("c975"),a("a15b"),a("13d5"),a("fb6a"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("1276"),a("159b");var g=a("d4ec"),b=a("bee2"),v=a("53ca"),_=function(t){return"string"===typeof t},k=Array.isArray,C=function(t){return"object"===Object(v["a"])(t)&&null!==t},$=function(t){return"function"===typeof t},w=Object.assign;function y(t){return String(t).replace(/(?:[\0- "-&\+-\}\x7F-\xA8\xAA-\xAD\xAF-\u2121\u2123-\u23E8\u23F0-\u23F2\u23F4-\u23F7\u23FB-\u24C1\u24C3-\u25B5\u25B7-\u25FF\u27C0-\u2933\u2936-\u2B04\u2B08-\u2B1A\u2B1D-\u2B4F\u2B51-\u2B54\u2B56-\u302F\u3031-\u303C\u303E-\u3296\u3298\u329A-\uD7FF\uE000-\uFFFF]|[\uD800-\uD83B\uD83F-\uDBFF][\uDC00-\uDFFF]|\uD83C[\uDC00-\uDC03\uDC05-\uDCCE\uDCD0-\uDD6F\uDD72-\uDD7D\uDD80-\uDD8D\uDD8F\uDD90\uDE52-\uDEFF]|\uD83D[\uDE50-\uDE7F\uDF00-\uDFFF]|\uD83E[\uDC00-\uDCFF\uDE00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~*]/g,(function(t){return"%".concat(t.charCodeAt().toString(16).slice(-2).toUpperCase())}))}function x(t){if(!t)return"";var e=[];return Object.keys(t).forEach((function(a){var s=t[a];null!==s&&void 0!==s||(s=""),e.push("".concat(y(a),"=").concat(y(s)))})),e.join("&").replace(/%20/g,"+")}function M(t){var e=function t(e,a,s){return k(s)||C(s)?(Object.keys(s).forEach((function(n){t(e,"".concat(a,"[").concat(n,"]"),s[n])})),e):(e[a]=s,e)};return x(Object.keys(t).reduce((function(a,s){return e(a,s,t[s])}),{}))}var S=function(){function t(e){Object(g["a"])(this,t),this.defaults=e}return Object(b["a"])(t,[{key:"get",value:function(t){return w({},this.defaults,t)}},{key:"set",value:function(t,e){var a=this;if(t){if(_(t)){var s=t.split(".");s.reduce((function(t,a,n){return n===s.length-1&&(t[a]=e),t[a]}),this.defaults)}C(t)&&Object.keys(t).forEach((function(e){a.set(e,t[e])})),k(t)&&t.forEach((function(t){return a.set(t,e)}))}}},{key:"remove",value:function(t){var e=this;if(t){if(_(t)){var a=t.split(".");a.reduce((function(t,e,s){return s===a.length-1&&delete t[e],t[e]}),this.defaults)}k(t)&&t.forEach((function(t){return e.remove(t)}))}}}]),t}(),O=function(){function t(e){Object(g["a"])(this,t),this.handler=e}return Object(b["a"])(t,[{key:"set",value:function(t){$(t)&&(this.handler=t)}},{key:"exec",value:function(){$(this.handler)&&this.handler.apply(null,arguments)}}]),t}(),j=function(){function t(e){Object(g["a"])(this,t),this.base=e||""}return Object(b["a"])(t,[{key:"set",value:function(t){_(t)&&(this.base=t)}},{key:"get",value:function(t){return this.base+(t||"")}}]),t}(),D=function t(){var e=this;Object(g["a"])(this,t),this.ServerUrl=new j,this.Options=new S({credentials:"same-origin",timeout:5e3}),this.Headers=new S({"X-Requested-With":"XMLHttpRequest"}),this.Body=new S({}),this.StatusHandler=new O,this.ResultHandler=new O((function(){return!0})),this.parseUrl=function(t,a){var s=x(e.Body.get(a));return s&&(s=-1===t.indexOf("?")?"?".concat(s):"&".concat(s)),t+s},this.checkStatus=function(t){var a=t.status;if(a>=200&&a<300||304===a)return t;throw e.StatusHandler.exec(a,t),new Error(t.statusText)},this.parseJSON=function(t){return t.json().then(null,(function(a){return e.StatusHandler.exec(500,t),Promise.reject(a)}))},this.successCallback=function(t){return e.ResultHandler.handler(t)?t:Promise.reject(t)},this.errorCallback=function(t){return Promise.reject(t)},this.get=function(t,a){var s=e.Options.get({headers:e.Headers.get()});return fetch(e.ServerUrl.get(e.parseUrl(t,a)),s).then(e.checkStatus).then(e.parseJSON).catch(e.errorCallback)},this.getJSON=function(t,a){var s=e.Options.get({headers:e.Headers.get()});return fetch(e.ServerUrl.get(e.parseUrl(t,a)),s).then(e.checkStatus).then(e.parseJSON).then(e.successCallback).catch(e.errorCallback)},this.post=function(t,a){var s=e.Options.get({method:"POST",headers:e.Headers.get({"Content-Type":"application/x-www-form-urlencoded"}),body:M(e.Body.get(a))});return fetch(e.ServerUrl.get(t),s).then(e.checkStatus).then(e.parseJSON).then(e.successCallback).catch(e.errorCallback)},this.postForm=function(t,a){var s=e.Options.get({method:"POST",headers:e.Headers.get(),body:a}),n=e.Body.get({});return Object.keys(n).forEach((function(t){a.append(t,n[t])})),fetch(e.ServerUrl.get(t),s).then(e.checkStatus).then(e.parseJSON).then(e.successCallback).catch(e.errorCallback)},this.postJSON=function(t,a){var s=e.Options.get({method:"POST",headers:e.Headers.get({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(e.Body.get(a))});return fetch(e.ServerUrl.get(t),s).then(e.checkStatus).then(e.parseJSON).then(e.successCallback).catch(e.errorCallback)},this.put=function(t,a){var s=e.Options.get({method:"PUT",headers:e.Headers.get({"Content-Type":"application/x-www-form-urlencoded"}),body:M(e.Body.get(a))});return fetch(e.ServerUrl.get(t),s).then(e.checkStatus).then(e.parseJSON).then(e.successCallback).catch(e.errorCallback)},this.remove=function(t,a){var s=e.Options.get({method:"DELETE",headers:e.Headers.get()});return fetch(e.ServerUrl.get(e.parseUrl(t,a)),s).then(e.checkStatus).then(e.parseJSON).then(e.successCallback).catch(e.errorCallback)},this.getPlain=function(t,a){var s=e.Options.get({method:"GET",headers:e.Headers.get()});return fetch(e.ServerUrl.get(e.parseUrl(t,a)),s).then(e.checkStatus).then(e.successCallback).catch(e.errorCallback)},this.postPlain=function(t,a){var s=e.Options.get({method:"POST",headers:e.Headers.get()});return fetch(e.ServerUrl.get(e.parseUrl(t,a)),s).then(e.checkStatus).then(e.successCallback).catch(e.errorCallback)},this.postBinary=function(t,a){var s=e.Options.get({method:"POST",headers:e.Headers.get(),body:a});return fetch(e.ServerUrl.get(e.parseUrl(t)),s).then(e.checkStatus).then(e.successCallback).catch(e.errorCallback)},this.download=function(t,a){window.open(e.ServerUrl.get(e.parseUrl(t,a)))}},N=D,F=new N;F.ServerUrl.set("/plugins/base/benchmark"),F.ResultHandler.set((function(t){return!(!t||200!==t.ret_code||null==t.data)})),["getJSON","postJSON"].forEach((function(t){var e=F[t];F["_".concat(t)]=e,F[t]=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e.call.apply(e,[null].concat(a)).then((function(t){return t.data}))}})),Object.defineProperty(s["default"].prototype,"$ajax",{get:function(){return F.Headers.set("X-Token",window.localStorage.ticket||""),F}});var L=F,P=new N;P.ServerUrl.set("/pages"),P.ResultHandler.set((function(t){return!(!t||200!==t.ret_code||null==t.data)})),["getJSON","postJSON"].forEach((function(t){var e=P[t];P["_".concat(t)]=e,P[t]=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e.call.apply(e,[null].concat(a)).then((function(t){return t.data}))}})),Object.defineProperty(s["default"].prototype,"$tars",{get:function(){return P}});var T=function(){function t(e){Object(g["a"])(this,t),this.vue=e}return Object(b["a"])(t,[{key:"showSucc",value:function(t){"string"==typeof t?this.vue.$message({message:t,showClose:!0,type:"success"}):this.vue.$message({message:"".concat(this.vue.$t("common.success")),showClose:!0,type:"success"})}},{key:"showWarning",value:function(t){this.vue.$message({message:t,showClose:!0,type:"warning"})}},{key:"showError",value:function(t){"string"==typeof t?this.vue.$message({message:t,showClose:!0,type:"error"}):t&&(t.message||t.err_msg)?this.vue.$message({message:"".concat(this.vue.$t("common.error"),": ").concat(t.message||t.err_msg),showClose:!0,type:"error"}):this.vue.$message({message:"".concat(this.vue.$t("common.error")),showClose:!0,type:"error"})}},{key:"showCloudError",value:function(t,e){this.vue.$message({message:this.vue.$t("cloud.".concat(t,".").concat(e&&e.tars_ret||"-1")),showClose:!0,type:"error"})}}]),t}();Object.defineProperty(s["default"].prototype,"$common",{get:function(){return this.commonUtil||(this.commonUtil=new T(this)),this.commonUtil}});var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("keep-alive",[a("router-view",{staticClass:"main-width"})],1)],1)},B=[],J={name:"App",components:{},data:function(){return{}},mounted:function(){}},E=J,I=a("2877"),q=Object(I["a"])(E,R,B,!1,null,null,null),U=q.exports,H=a("8c4f"),z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_server_debuger"},[t.showDebug||t.showBm||t.showCaseList||t.addTestCase||t.modifyTestCase?t._e():a("wrapper",{ref:"tarsFileListLoading"},[a("div",{staticClass:"table_head",staticStyle:{height:"50px"}},[a("h4",[t._v(" "+t._s(this.$t("inf.title.listTitle"))+" "),a("i",{staticClass:"el-icon-refresh-right",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.getFileList()}}})]),a("let-button",{staticClass:"add-btn",attrs:{size:"small",theme:"primary"},on:{click:t.openTarsUploadFileModal}},[t._v(t._s(t.$t("operate.add")))])],1),a("let-table",{attrs:{data:t.tarsFileList,"empty-msg":t.$t("common.nodata")}},[a("let-table-column",{attrs:{title:t.$t("inf.benchmark.app"),prop:"application"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.service"),prop:"server_name"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.fileName"),prop:"file_name"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.updateTime"),prop:"posttime"}}),a("let-table-column",{attrs:{title:t.$t("operate.operates"),width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("let-table-operation",{on:{click:function(a){return t.showDebuger(e.row)}}},[t._v(t._s(t.$t("inf.list.debug")))]),a("let-table-operation",{on:{click:function(a){return t.showBenchmark(e.row)}}},[t._v(t._s(t.$t("inf.list.benchmark")))]),a("let-table-operation",{on:{click:function(a){return t.getTestCaseList(e.row)}}},[t._v(t._s(t.$t("operate.testCaseList")))]),a("let-table-operation",{on:{click:function(a){return t.deleteTarsFile(e.row.f_id)}}},[t._v(t._s(t.$t("operate.delete")))])]}}],null,!1,1739870877)})],1),a("el-divider")],1),t.showDebug?a("div",[a("let-form",{attrs:{inline:!0}},[a("let-form-item",{attrs:{label:t.$t("inf.dlg.selectLabel")}},[a("let-cascader",{attrs:{data:t.contextData,required:"",size:"small"},on:{change:t.getParams}})],1),t.objList.length?a("let-form-item",{attrs:{label:t.$t("inf.dlg.objName")}},[a("let-select",{model:{value:t.objName,callback:function(e){t.objName=e},expression:"objName"}},t._l(t.objList,(function(t){return a("let-option",{key:t.servant,attrs:{value:t.servant}})})),1)],1):t._e(),a("let-form-item",[a("let-button",{attrs:{theme:"primary"},on:{click:t.doDebug}},[t._v(t._s(t.$t("inf.list.debug")))])],1)],1),a("let-row",[a("div",{staticClass:"params_container"},[a("let-col",{attrs:{span:12,itemWidth:"100%"}},[a("let-form",{attrs:{itemWidth:"100%"}},[a("let-input",{staticClass:"param_area div_line",attrs:{type:"textarea",rows:20,placeholder:t.$t("inf.dlg.inParam")},model:{value:t.inParam,callback:function(e){t.inParam=e},expression:"inParam"}})],1)],1),a("let-col",{attrs:{span:12}},[a("let-form",{attrs:{itemWidth:"100%"}},[a("let-input",{staticClass:"param_area",attrs:{type:"textarea",rows:20,placeholder:t.$t("inf.dlg.outParam")},model:{value:t.outParam,callback:function(e){t.outParam=e},expression:"outParam"}})],1)],1)],1)]),a("div",{staticClass:"mt10"},[a("let-button",{attrs:{theme:"primary",size:"small"},on:{click:function(e){t.showDebug=!1}}},[t._v(t._s(t.$t("operate.goback")))])],1)],1):t._e(),t.showBm?a("InterfaceBenchmark",{ref:"bm",attrs:{servantList:t.objList}}):t._e(),a("let-modal",{attrs:{title:t.$t("inf.title.dlgTitle"),width:"880px",footShow:!1},on:{"on-cancel":t.closeUploadModal},model:{value:t.uploadModal.show,callback:function(e){t.$set(t.uploadModal,"show",e)},expression:"uploadModal.show"}},[t.uploadModal.model?a("let-form",{ref:"uploadForm",attrs:{itemWidth:"100%"},nativeOn:{submit:function(e){return e.preventDefault(),t.uploadTarsFile(e)}}},[a("let-form-item",{attrs:{itemWidth:"400px"}},[a("let-uploader",{attrs:{placeholder:t.$t("inf.dlg.tarsFile"),accept:".tars",multiple:""},on:{upload:t.uploadFile}},[t._v(t._s(t.$t("common.choose")))]),t._l(t.uploadModal.fileList2Show,(function(e){return a("li",{key:e.index},[t._v(" "+t._s(e.name)+" ")])}))],2),a("let-button",{attrs:{type:"submit",theme:"primary"}},[t._v(t._s(t.$t("inf.dlg.upload")))])],1):t._e()],1),t.addTestCase&&!t.showCaseList?a("div",[a("let-form",{attrs:{inline:!0}},[a("let-form-item",{attrs:{label:t.$t("inf.dlg.selectLabel"),required:""}},[a("let-cascader",{attrs:{data:t.contextData,required:"",size:"small"},on:{change:t.getParams}})],1),t.objList.length?a("let-form-item",{attrs:{label:t.$t("inf.dlg.objName"),required:""}},[a("let-select",{model:{value:t.objName,callback:function(e){t.objName=e},expression:"objName"}},t._l(t.objList,(function(t){return a("let-option",{key:t.servant,attrs:{value:t.servant}})})),1)],1):t._e(),a("let-form-item",{attrs:{label:t.$t("inf.dlg.testCastName"),required:""}},[a("let-input",{attrs:{placeholder:t.$t("inf.dlg.testCastName")},model:{value:t.testCastName,callback:function(e){t.testCastName=e},expression:"testCastName"}})],1)],1),a("let-row",[a("div",{staticClass:"params_container"},[a("let-col",{attrs:{itemWidth:"100%"}},[a("let-form",{attrs:{itemWidth:"100%"}},[a("let-input",{staticClass:"param_area div_line",attrs:{type:"textarea",rows:20,placeholder:t.$t("inf.dlg.inParam")},model:{value:t.inParam,callback:function(e){t.inParam=e},expression:"inParam"}})],1)],1)],1)]),a("div",{staticClass:"mt10"},[a("let-button",{attrs:{theme:"primary"},on:{click:t.doAddTestCast}},[t._v(t._s(t.$t("operate.add")))]),t._v(" "),a("let-button",{attrs:{theme:"primary"},on:{click:function(e){t.addTestCase=!1,t.showCaseList=!0}}},[t._v(t._s(t.$t("operate.goback")))])],1)],1):t._e(),t.showCaseList&&!t.addTestCase?a("div",[a("let-form",{attrs:{inline:!0}},[a("let-form-item",{attrs:{label:t.$t("inf.dlg.selectLabel")}},[a("let-cascader",{attrs:{data:t.contextData,required:"",size:"small"},on:{change:t.getTestCaseByParams}})],1),t.objList.length?a("let-form-item",{attrs:{label:t.$t("inf.dlg.objName")}},[a("let-select",{model:{value:t.objName,callback:function(e){t.objName=e},expression:"objName"}},t._l(t.objList,(function(t){return a("let-option",{key:t.servant,attrs:{value:t.servant}})})),1)],1):t._e()],1),a("let-table",{attrs:{data:t.testCaseList,title:t.$t("operate.testCaseList"),"empty-msg":t.$t("common.nodata")}},[a("let-table-column",{attrs:{title:t.$t("inf.dlg.testCastName"),prop:"test_case_name",width:"150px"}}),a("let-table-column",{attrs:{title:t.$t("inf.dlg.objName"),prop:"object_name",width:"200px"}}),a("let-table-column",{attrs:{title:t.$t("inf.dlg.fileName"),prop:"file_name",width:"150px"}}),a("let-table-column",{attrs:{title:t.$t("inf.dlg.module"),prop:"module_name",width:"100px"}}),a("let-table-column",{attrs:{title:t.$t("inf.dlg.method"),prop:"function_name",width:"100px"}}),a("let-table-column",{attrs:{title:t.$t("inf.dlg.user"),prop:"modify_user",width:"100px"}}),a("let-table-column",{attrs:{title:t.$t("operate.operates"),width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("let-table-operation",{on:{click:function(a){return t.gotoModify(e.row)}}},[t._v(t._s(t.$t("operate.modify")))]),a("let-table-operation",{on:{click:function(a){return t.deleteTestCase(e.row.case_id)}}},[t._v(t._s(t.$t("operate.delete")))])]}}],null,!1,1747584781)}),a("let-table-column",{attrs:{title:t.$t("inf.dlg.node")},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.totalServerList,(function(s,n){return a("div",{key:n},[a("let-table-operation",{on:{click:function(a){return t.doNodedebug(s,e.row)}}},[t._v(t._s(s.node_name))]),a("br")],1)}))}}],null,!1,2011633546)})],1),a("div",{staticClass:"mt10"},[a("let-button",{attrs:{theme:"primary",size:"small"},on:{click:function(e){return t.gotoAddTestCase()}}},[t._v(t._s(t.$t("operate.addTestCase")))]),t._v(" "),a("let-button",{attrs:{theme:"primary",size:"small"},on:{click:function(e){t.showCaseList=!1}}},[t._v(t._s(t.$t("operate.goback")))])],1)],1):t._e(),t.modifyTestCase?a("div",[a("let-form",{staticClass:"left_align",attrs:{itemWidth:"530px"}},[a("let-form-item",[a("span",{staticClass:"text-blue"},[t._v(t._s(t.modifyCaseItem.object_name)+"::"+t._s(t.modifyCaseItem.function_name))])]),a("let-form-item",{attrs:{label:t.$t("inf.dlg.testCastName")}},[a("let-input",{attrs:{placeholder:t.$t("inf.dlg.testCastName")},model:{value:t.testCastName,callback:function(e){t.testCastName=e},expression:"testCastName"}})],1)],1),a("let-row",[a("div",{staticClass:"params_container"},[a("let-col",{attrs:{itemWidth:"100%"}},[a("let-form",{attrs:{itemWidth:"100%"}},[a("let-input",{staticClass:"param_area div_line",attrs:{type:"textarea",rows:20,placeholder:t.$t("inf.dlg.inParam")},model:{value:t.inParam,callback:function(e){t.inParam=e},expression:"inParam"}})],1)],1)],1)]),a("div",{staticClass:"mt10"},[a("let-button",{attrs:{theme:"primary"},on:{click:t.doModifyTestCase}},[t._v(t._s(t.$t("operate.modify")))]),t._v(" "),a("let-button",{attrs:{theme:"primary"},on:{click:function(e){t.modifyTestCase=!1,t.showCaseList=!0}}},[t._v(t._s(t.$t("operate.goback")))])],1)],1):t._e(),a("let-modal",{attrs:{title:t.$t("inf.benchmark.debugResult"),width:"600px",footShow:!1},on:{close:t.closeDebugModal},model:{value:t.debugModal.show,callback:function(e){t.$set(t.debugModal,"show",e)},expression:"debugModal.show"}},[a("let-row",[a("div",{staticClass:"params_container"},[a("let-col",{attrs:{itemWidth:"100%"}},[a("let-form",{attrs:{itemWidth:"100%"}},[a("let-input",{staticClass:"param_area div_line",attrs:{type:"textarea",rows:40,placeholder:t.$t("inf.benchmark.debugResult")},model:{value:t.debugModal.resultParam,callback:function(e){t.$set(t.debugModal,"resultParam",e)},expression:"debugModal.resultParam"}})],1)],1)],1)])],1)],1)},A=[],W=(a("a630"),a("b0c0"),a("3ca3"),a("841c"),a("b85c")),Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section"},[t._t("default")],2)},V=[],K=(a("33c3"),{}),X=Object(I["a"])(K,Y,V,!1,null,"2643216f",null),G=X.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"benchmark_wrapper"},[a("let-form",[a("let-form-item",{attrs:{label:t.$t("inf.dlg.objName")}},[a("let-select",{attrs:{size:"small"},on:{change:t.objChange},model:{value:t.servant,callback:function(e){t.servant=e},expression:"servant"}},t._l(t.servantList,(function(t){return a("let-option",{key:t.servant,attrs:{value:t.servant}})})),1)],1)],1),a("let-table",{attrs:{data:t.fnList,title:t.$t("inf.benchmark.fnlist"),"empty-msg":t.$t("inf.benchmark.nofn"),"row-class-name":t.fnRowClassName}},[a("let-table-column",{attrs:{title:t.$t("inf.benchmark.interface"),prop:"interface",width:"100px"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.fnname"),prop:"name",width:"120px"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.returnType"),prop:"return",width:"120px"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.inParam")},scopedSlots:t._u([{key:"default",fn:function(t){return[a("json-view",{attrs:{maxDepth:0,rootKey:"view",colorScheme:"dark",data:JSON.parse(t.row.inParams)}})]}}])}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.outParam")},scopedSlots:t._u([{key:"default",fn:function(t){return[a("json-view",{attrs:{maxDepth:0,rootKey:"view",colorScheme:"dark",data:JSON.parse(t.row.outParams)}})]}}])}),a("let-table-column",{attrs:{title:t.$t("operate.operates"),width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("let-table-operation",{on:{click:function(a){return t.queryCase(e.row)}}},[t._v(t._s(t.$t("inf.benchmark.case")))])]}}])})],1),t.showCase?a("wrapper",[a("h4",[t._v(" "+t._s(t.currentFn.interface+"."+t.currentFn.name+" "+this.$t("inf.benchmark.caselist"))+" "),a("i",{staticClass:"el-icon-refresh-right",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.getBenchmarkCaseList()}}}),a("el-button",{staticClass:"add-btn",staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:t.initCaseContentForm}},[t._v(t._s(t.$t("inf.benchmark.addCase")))])],1),a("br"),a("let-table",{attrs:{data:t.bmCaseList,"empty-msg":t.$t("inf.benchmark.nocase")}},[a("let-table-column",{attrs:{title:t.$t("inf.benchmark.des"),prop:"des"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.inputValue"),prop:"in_values"}}),a("let-table-column",{attrs:{title:t.$t("operate.operates"),width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("let-table-operation",{on:{click:function(a){return t.initCaseContentForm(e.row)}}},[t._v(t._s(t.$t("inf.benchmark.modifyCase")))]),a("let-table-operation",{on:{click:function(a){return t.initCaseConfigForm(e.row,"test")}}},[t._v(t._s(t.$t("inf.benchmark.testCase")))]),a("let-table-operation",{on:{click:function(a){return t.initCaseConfigForm(e.row,"start")}}},[t._v(t._s(t.$t("inf.benchmark.runCase")))]),a("let-table-operation",{on:{click:function(a){return t.queryResult(e.row)}}},[t._v(t._s(t.$t("inf.benchmark.viewResult")))]),a("let-table-operation",{on:{click:function(a){return t.deleteBmCase(e.row)}}},[t._v(t._s(t.$t("inf.benchmark.deleteCase")))])]}}],null,!1,382556772)})],1)],1):t._e(),a("div",{staticClass:"mt10"},[a("let-button",{attrs:{theme:"primary",size:"small"},on:{click:function(e){t.$parent.showBm=!1}}},[t._v(t._s(t.$t("operate.goback")))])],1),a("let-modal",{attrs:{title:t.$t("inf.benchmark.case"),width:"700px"},on:{"on-confirm":t.upsertCaseContent},model:{value:t.upsertCaseContentModal,callback:function(e){t.upsertCaseContentModal=e},expression:"upsertCaseContentModal"}},[a("let-form",{attrs:{itemWidth:"100%"}},[a("let-form-item",{attrs:{label:t.$t("inf.benchmark.des")}},[a("let-input",{attrs:{size:"small"},model:{value:t.caseModel.des,callback:function(e){t.$set(t.caseModel,"des",e)},expression:"caseModel.des"}})],1),a("let-form-item",{attrs:{label:t.$t("inf.benchmark.inParam")}},[a("json-view",{attrs:{maxDepth:0,rootKey:"view",data:JSON.parse(t.currentFn.inParams||"{}")}})],1),a("let-form-item",{attrs:{label:t.$t("inf.benchmark.inputValue")}},[a("let-input",{attrs:{size:"small",rows:10,type:"textarea"},model:{value:t.caseModel.in_values,callback:function(e){t.$set(t.caseModel,"in_values",e)},expression:"caseModel.in_values"}}),a("a",{attrs:{target:"_blank",href:"https://doc.tarsyun.com/#/benchmark/tars-guide.md"}},[a("let-table-operation",[t._v(t._s(t.$t("inf.benchmark.inputValueDes")))])],1)],1)],1)],1),a("let-modal",{ref:"startBm",attrs:{footShow:!1,title:t.$t("inf.benchmark.bmParams"),width:"700px"},model:{value:t.upsertCaseConfigModal,callback:function(e){t.upsertCaseConfigModal=e},expression:"upsertCaseConfigModal"}},[a("let-form",{staticClass:"start-bm",attrs:{itemWidth:"100%"}},[a("let-form-item",{attrs:{label:"servant"}},[a("let-input",{attrs:{disabled:"",size:"small"},model:{value:t.caseModel.servant,callback:function(e){t.$set(t.caseModel,"servant",e)},expression:"caseModel.servant"}})],1),a("let-form-item",{attrs:{label:t.$t("inf.benchmark.endpoints")}},[t._l(t.endpoints,(function(e,s){return a("let-checkbox",{key:s,staticClass:"checkbox_endpoint_item",model:{value:t.endpoints[s],callback:function(e){t.$set(t.endpoints,s,e)},expression:"endpoints[name]"}},[t._v(t._s(s))])})),a("let-input",{attrs:{size:"small",type:"textarea",placeholder:t.$t("inf.benchmark.endpointsTip")},model:{value:t.caseModel.endpoints,callback:function(e){t.$set(t.caseModel,"endpoints",e)},expression:"caseModel.endpoints"}})],2),a("let-form-group",{attrs:{inline:"","label-position":"top"}},["start"==t.upsertCaseConfigModalName?a("let-form-item",{attrs:{label:t.$t("inf.benchmark.links"),size:5}},[a("let-input",{attrs:{type:"number",size:"small",required:""},model:{value:t.caseModel.links,callback:function(e){t.$set(t.caseModel,"links",e)},expression:"caseModel.links"}})],1):t._e(),"start"==t.upsertCaseConfigModalName?a("let-form-item",{attrs:{label:t.$t("inf.benchmark.speed"),size:5}},[a("let-input",{attrs:{type:"number",size:"small",required:""},model:{value:t.caseModel.speed,callback:function(e){t.$set(t.caseModel,"speed",e)},expression:"caseModel.speed"}})],1):t._e(),"start"==t.upsertCaseConfigModalName?a("let-form-item",{attrs:{label:t.$t("inf.benchmark.duration"),size:5}},[a("let-input",{attrs:{type:"number",size:"small",required:""},model:{value:t.caseModel.duration,callback:function(e){t.$set(t.caseModel,"duration",e)},expression:"caseModel.duration"}})],1):t._e(),t.testResultModal?a("let-form-item",{attrs:{label:t.$t("inf.benchmark.testResult"),size:5}},[a("div",[t._v(t._s(t.testResult.errmsg||t.testResultRsp))])]):t._e(),a("let-form-item",{attrs:{size:5}},["test"==t.upsertCaseConfigModalName?a("let-button",{staticClass:"start_bm",attrs:{theme:"primary"},on:{click:function(e){return t.execBenchmark("test")}}},[t._v(t._s(t.$t("inf.benchmark.infTest")))]):t._e(),"start"==t.upsertCaseConfigModalName?a("let-button",{staticClass:"start_bm",attrs:{theme:"primary"},on:{click:t.upsertCaseConfig}},[t._v(t._s(t.$t("inf.benchmark.startBenchmark")))]):t._e(),a("let-button",{staticClass:"cancel_bm",on:{click:function(e){t.upsertCaseConfigModal=!1}}},[t._v(t._s(t.$t("inf.benchmark.cancelTest")))])],1)],1)],1)],1),a("let-modal",{attrs:{footShow:!1,title:t.result.fn+" - "+t.$t("inf.benchmark.testResult"),width:"1300px"},model:{value:t.resultModal,callback:function(e){t.resultModal=e},expression:"resultModal"}},[a("wrapper",[a("div",{staticClass:"result_op"},[0==t.result.status?a("let-button",{staticClass:"bmop-btn",attrs:{size:"small",theme:"success"},on:{click:function(e){return t.initCaseConfigForm(t.currentCase,"start")}}},[t._v(t._s(t.$t("inf.benchmark.startBenchmark")))]):t._e(),1==t.result.status?a("let-button",{staticClass:"bmop-btn",attrs:{size:"small",theme:"danger"},on:{click:function(e){return t.execBenchmark("stop")}}},[t._v(t._s(t.$t("inf.benchmark.stopBenchmark")))]):t._e(),a("let-button",{staticClass:"bmop-btn",attrs:{size:"small",theme:"sub-primary"},on:{click:function(e){return t.getResultById(t.result.id)}}},[t._v(t._s(t.$t("inf.benchmark.refresh"))),1==t.result.status?a("span",[t._v("("+t._s(t.nextRefresh)+"s)")]):t._e()])],1),a("div",{staticClass:"result_select"},[a("let-radio",{attrs:{label:"detail"},model:{value:t.resultMode,callback:function(e){t.resultMode=e},expression:"resultMode"}},[t._v(t._s(t.$t("inf.benchmark.detail")))]),a("let-radio",{attrs:{label:"chart"},model:{value:t.resultMode,callback:function(e){t.resultMode=e},expression:"resultMode"}},[t._v(t._s(t.$t("inf.benchmark.stat")))])],1),"detail"==t.resultMode?a("let-table",{staticStyle:{height:"500px",overflow:"auto"},attrs:{data:t.result.results,"empty-msg":"data is empty"}},[a("let-table-column",{attrs:{title:t.$t("inf.benchmark.time"),prop:"time_stamp",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(t.formatDate(1e3*s.time_stamp)))])]}}],null,!1,3571902152)}),a("let-table-column",{attrs:{title:"qps",prop:"avg_speed",width:"70px",align:"center"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.total"),prop:"total_request",width:"70px",align:"center"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.success"),prop:"succ_request",width:"70px",align:"center"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.fail"),prop:"fail_request",width:"70px",align:"center"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.successRate"),width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(t.getSuccessRate(s)))])]}}],null,!1,2998239836)}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.maxCost"),prop:"max_time",width:"80px",align:"center"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.minCost"),prop:"min_time",width:"80px",align:"center"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.avgCost"),width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(0==s.total_request?0:(s.total_time/s.total_request).toFixed(2)))])]}}],null,!1,4002287607)}),a("let-table-column",{attrs:{title:"p90",width:"70px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(s.p90_time.toFixed(2)))])]}}],null,!1,4042163207)}),a("let-table-column",{attrs:{title:"p99",width:"70px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(s.p99_time.toFixed(2)))])]}}],null,!1,2893222382)}),a("let-table-column",{attrs:{title:"p999",width:"70px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(s.p999_time.toFixed(2)))])]}}],null,!1,892995607)}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.sendBytes"),prop:"send_bytes",width:"80px",align:"center"}}),a("let-table-column",{attrs:{title:t.$t("inf.benchmark.recvBytes"),prop:"recv_bytes",width:"80px",align:"center"}})],1):t._e(),"chart"==t.resultMode?a("div",{staticClass:"return_chart"},[a("ve-pie",{attrs:{legend:t.returnChartOptions.legend,title:t.returnChartOptions.title,data:t.returnChartOptions,width:"500px"}}),a("ve-pie",{attrs:{legend:t.costChartOptions.legend,title:t.costChartOptions.title,data:t.costChartOptions,width:"500px"}})],1):t._e()],1)],1)],1)},Z=[],tt=(a("4de4"),a("d81d"),a("a434"),a("b680"),a("6062"),a("ddb0"),a("ade3")),et=a("10be"),at=a.n(et),st=a("3057");a("4d63");function nt(t){return null==t?new Date:t instanceof Date?t:new Date(t)}function rt(t,e){if(t=nt(t),e=e||"YYYY-MM-DD HH:mm:ss",isNaN(t.getTime()))return e;var a={"M+":t.getMonth()+1,"D+":t.getDate(),"H+":t.getHours(),"h+":t.getHours()%12===0?12:t.getHours()%12,"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};return/(Y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(dd+)/.test(e)&&(e=e.replace(RegExp.$1,"日一二三四五六七".split("")[t.getDay()])),Object.keys(a).forEach((function(t){if(new RegExp("("+t+")").test(e)){var s=RegExp.$1,n="".concat(a[t]);e=e.replace(s,1===s.length?n:"00".concat(n).substr(n.length))}})),e}var it={id:null,des:"",in_values:""},ot=5e3,lt={name:"InterfaceBenchmark",components:{wrapper:G,VePie:at.a,"json-view":st["a"]},data:function(){return{showCase:!1,upsertCaseContentModal:!1,upsertCaseConfigModalName:"",upsertCaseConfigModal:!1,resultModal:!1,testResultModal:!1,servant:"",currentFn:{},currentCase:{},resultMode:"detail",endpoints:{},selectedEndpoints:[],fnList:[],bmCaseList:[],result:{results:[],status:0},testResult:{},nextRefresh:6,nextRefreshTimer:0,caseModel:Object.assign({},it)}},methods:{formatDate:rt,fnRowClassName:function(t){var e=t.row;t.rowIndex;return e==this.currentFn?"current_fn":""},getSuccessRate:function(t){var e=t.succ_request+t.fail_request;return e?(100*t.succ_request/e).toFixed(2)+"%":"0%"},upsertBmCase:function(t){var e=this,a=this.$Loading.show();t.servant=this.servant,t.fn=this.currentFn.name,this.$ajax.postJSON("/api/upsert_bm_case",t).then((function(t){e.upsertCaseContentModal=!1,e.upsertCaseConfigModal=!1,setTimeout((function(){a.hide(),e.getBenchmarkCaseList()}),1e3)})).catch((function(t){a.hide(),e.upsertCaseContentModal=!1,e.upsertCaseConfigModal=!1,e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},initCaseContentForm:function(t){t&&t.id?this.caseModel=Object.assign({},t):(this.caseModel=Object.assign({},it),this.caseModel.in_values=this.currentFn.funInput),this.upsertCaseContentModal=!0},initCaseConfigForm:function(t,e){if(t){this.currentCase=t,this.testResult={},this.testResultModal=!1,this.caseModel=Object.assign({},t),this.caseModel.links||(this.caseModel.links=1),this.caseModel.speed||(this.caseModel.speed=100),this.caseModel.duration||(this.caseModel.duration=20),this.caseModel.endpoints=this.caseModel.endpoints||"";var a=this.caseModel.endpoints.split("\n");for(var s in this.endpoints){var n=a.indexOf(s);n>-1?(this.endpoints[s]=!0,a.splice(n,1)):this.endpoints[s]=!1}this.caseModel.endpoints=a.join("\n"),this.upsertCaseConfigModalName=e,this.upsertCaseConfigModal=!0,this.resultModal=!1}},upsertCaseContent:function(){console.log(this.caseModel);var t={};this.caseModel.id&&(t.id=this.caseModel.id),t.des=this.caseModel.des,t.in_values=this.caseModel.in_values,this.upsertBmCase(t)},upsertCaseConfig:function(){var t={};t.id=this.caseModel.id,t.links=this.caseModel.links,t.speed=this.caseModel.speed,t.duration=this.caseModel.duration,t.endpoints=this.queryFullEndpoints(),this.upsertBmCase(t),t.endpoints&&this.caseModel.links&&this.caseModel.speed&&this.caseModel.duration?this.execBenchmark():this.$Notice({title:"missing params",type:"error"})},execBenchmark:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start",a={caseId:this.currentCase.id,servant:this.servant,fn:this.currentFn.name},s="";switch(e){case"start":s="/api/start_benchmark",a.para_input=this.currentFn.inParams,a.para_value=this.currentCase.in_values,a.para_output=this.currentFn.outParams,a.endpoints=this.queryFullEndpoints(),a.links=this.caseModel.links,a.speed=this.caseModel.speed,a.duration=this.caseModel.duration;break;case"stop":s="/api/stop_benchmark";break;case"test":s="/api/test_benchmark",a.para_input=this.currentFn.inParams,a.para_value=this.currentCase.in_values,a.para_output=this.currentFn.outParams,a.endpoints=this.queryFullEndpoints();break}this.$ajax.postJSON(s,a).then((function(a){switch("start"==e&&t.queryResult(),e){case"start":t.result.status=t.currentCase.status=1,t.queryResult();break;case"stop":t.result.status=t.currentCase.status=0,t.stopPollingResult();break;case"test":t.testResult=a,t.testResultModal=!0;break}})).catch((function(e){t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))},queryFullEndpoints:function(){var t=[];for(var e in this.endpoints)this.endpoints[e]&&t.push(e);return this.caseModel.endpoints.split("\n").forEach((function(e){t.push(e)})),Array.from(new Set(t)).filter((function(t){return!!t})).join("\n")},queryResult:function(t){t&&(this.currentCase=t),this.getResultById(this.currentCase.id),this.resultModal=!0},queryCase:function(t){this.showCase=!0,this.currentFn=t,this.getBenchmarkCaseList()},getBenchmarkDes:function(t){var e=this;this.$ajax.getJSON("/api/get_benchmark_des",{id:t}).then((function(t){e.fnList=t})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},getBenchmarkCaseList:function(){var t=this;this.$ajax.getJSON("/api/get_bm_case_list",{servant:this.servant,fn:this.currentFn.name}).then((function(e){t.bmCaseList=e})).catch((function(e){t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))},getResultById:function(t){var e=this;this.result.id=t,this.$ajax.getJSON("/api/get_bm_result_by_id",{id:t}).then((function(t){t.results=JSON.parse(t.results||"[]"),t.results.reverse(),e.result=t})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},deleteBmCase:function(t){var e=this;this.$confirm(this.$t("inf.benchmark.deleteCaseConfirm"),this.$t("common.alert")).then((function(){var a=e.$Loading.show();e.$ajax.postJSON("/api/delete_bm_case",{id:t.id,servant:t.servant}).then((function(t){setTimeout((function(){a.hide(),e.getBenchmarkCaseList()}),1e3)})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}))},startPollingResult:function(){var t=this;this.stopPollingResult(),this.nextRefreshTimer=setInterval((function(){t.nextRefresh--,0==t.nextRefresh?t.queryResult():t.nextRefresh<0&&t.nextRefresh<0&&(t.nextRefresh=ot/1e3)}),1e3)},stopPollingResult:function(){this.nextRefresh=ot/1e3,clearInterval(this.nextRefreshTimer)},objChange:function(){var t=this;this.servant&&this.$ajax.getJSON("/api/get_endpoints",{servant:this.servant}).then((function(e){t.endpoints={},e.forEach((function(e){t.endpoints["".concat(e.istcp?"tcp":"udp"," -h ").concat(e.host," -p ").concat(e.port," -t ").concat(e.timeout)]=!1}))})).catch((function(e){t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))},pieFromResult:function(t,e,a,s){var n,r={},i=Object(W["a"])(this.result.results);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o[s])for(var l in o[s])r[l]||(r[l]=0),r[l]+=o[s][l]}}catch(u){i.e(u)}finally{i.f()}var c=Object.keys(r).map((function(t){var s;return s={},Object(tt["a"])(s,e,t),Object(tt["a"])(s,a,r[t]),s}));return{title:{text:t||""},legend:{orient:"vertical",top:50,right:0},columns:[e,a],rows:c}}},computed:{testResultRsp:function(){return(this.testResult.rsp||"").replace(/<br>/g,"\n")},costChartOptions:function(){return this.pieFromResult(this.$t("inf.benchmark.costStat"),"返回值","数量","cost_map")},returnChartOptions:function(){return this.pieFromResult(this.$t("inf.benchmark.retStat"),"返回值","数量","ret_map")},getParam:function(t){var e=null,a=!1;if(0==location.search.indexOf("?")&&location.search.indexOf("=")>1){var s=unescape(location.search).substring(1,location.search.length).split("&"),n=0;while(n<s.length&&!a)s[n].indexOf("=")>0&&s[n].split("=")[0].toLowerCase()==t.toLowerCase()&&(e=s[n].split("=")[1],a=!0),n++}return e}},props:{servantList:{type:Array,required:!0}},watch:{servantList:{immediate:!0,handler:function(t,e){t.length&&!this.servant&&(this.servant=t[0].servant,this.objChange())}},resultModal:function(t,e){if(t){if(0==this.currentCase.status)return;this.startPollingResult()}else this.stopPollingResult()}},beforeDestory:function(){this.stopPollingResult()},mounted:function(){}},ct=lt,ut=(a("d1d2"),Object(I["a"])(ct,Q,Z,!1,null,null,null)),dt=ut.exports,ht={name:"InterfaceDebuger",components:{wrapper:G,InterfaceBenchmark:dt},data:function(){return{k8s:!1,serverData:{level:5,application:"",server_name:"",set_name:"",set_area:"",set_group:""},tarsFileList:[],totalServerList:[],uploadModal:{show:!1,model:{},fileList2Show:[]},debugModal:{show:!1,resultParam:""},showDebug:!1,showBm:!1,contextData:[],debuger_panel:!1,inParam:"",outParam:"",selectedFileName:"",selectedMethods:[],objName:"",objList:[],selectedId:"",testCastName:"",testCaseList:[],showCaseList:!1,addTestCase:!1,modifyTestCase:!1,modifyCaseItem:{},rowData:{}}},methods:{closeDebugModal:function(){this.debugModal.show=!1},getFileList:function(){var t=this,e=this.$Loading.show();this.$ajax.getJSON("/api/get_file_list",{application:this.serverData.application,server_name:this.serverData.server_name,k8s:this.k8s}).then((function(a){e.hide(),t.tarsFileList=a})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(a.message||a.err_msg))}))},openTarsUploadFileModal:function(){this.uploadModal.show=!0,this.uploadModal.model={application:this.serverData.application,server_name:this.serverData.server_name,set_name:this.serverData.set_name,file:[]},this.uploadModal.fileList2Show=[]},uploadFile:function(t){if(this.uploadModal.fileList2Show=[],t.length){var e,a=0,s=Object(W["a"])(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;this.uploadModal.fileList2Show.push({name:n.name,index:100*Math.random()});var r=n.name.split(".");r[r.length-1];a+=1}}catch(i){s.e(i)}finally{s.f()}a===t.length&&(this.uploadModal.model.file=Array.from(t))}},uploadTarsFile:function(){var t=this;if(this.$refs.uploadForm.validate()){var e=this.$Loading.show(),a=new FormData;a.append("application",this.uploadModal.model.application),a.append("server_name",this.uploadModal.model.server_name),a.append("set_name",this.uploadModal.model.set_name),a.append("k8s",this.k8s),this.uploadModal.model.file.forEach((function(t){return a.append("suse",t)})),this.$ajax.postForm("/api/upload_tars_file",a).then((function(){setTimeout((function(){e.hide(),t.getFileList(),t.uploadModal.show=!1,t.uploadModal.model=null}),1e3)})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(a.message||a.err_msg))}))}},closeUploadModal:function(){this.uploadModal.show=!1},showDebuger:function(t){this.showDebug=!0,this.selectedFileName=t.file_name,this.inParam=null,this.outParam=null,this.selectedId=t.f_id,this.objName=null,this.getContextData(t.f_id),this.getObjList()},showBenchmark:function(t){var e=this;this.showBm=!0,this.showDebug=!1,this.showCaseList=!1,this.addTestCase=!1,this.modifyTestCase=!1,this.$nextTick((function(){e.$refs.bm.getBenchmarkDes(t.f_id)}))},deleteTarsFile:function(t){var e=this;this.$confirm(this.$t("inf.dlg.deleteMsg"),this.$t("common.alert")).then((function(){var a=e.$Loading.show();e.$ajax.getJSON("/api/delete_tars_file",{id:t,k8s:e.k8s}).then((function(t){setTimeout((function(){a.hide(),e.getFileList()}),1e3)})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))})).catch((function(){}))},getObjList:function(){var t=this;this.k8s?this.$tars.getJSON("/k8s/api/all_adapter_conf_list",{ServerApp:this.serverData.application,ServerName:this.serverData.server_name}).then((function(e){e.length&&(t.objList=e,t.objName=e[0].servant)})).catch((function(e){t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))})):this.$tars.getJSON("/api/all_adapter_conf_list",{application:this.serverData.application,server_name:this.serverData.server_name}).then((function(e){e.length&&(t.objList=e,t.objName=e[0].servant)})).catch((function(e){t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))},getContextData:function(t){var e=this;this.$ajax.getJSON("/api/get_contexts",{id:t,application:this.serverData.application,server_name:this.serverData.server_name,type:"all",k8s:this.k8s}).then((function(t){e.contextData=t})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},parseFields:function(t){var e={};for(var a in t){var s=t[a].defaultValue;s||("string"===t[a].type?s="":"long"!==t[a].type&&"int"!==t[a].type||(s=0)),e[a]=s}return e},getParams:function(t){var e=this;if(this.selectedMethods=t,3==t.length){var a=this.$Loading.show();this.$ajax.getJSON("/api/get_params",{application:this.serverData.application,server_name:this.serverData.server_name,id:this.selectedId,module_name:t[0],interface_name:t[1],function_name:t[2],k8s:this.k8s}).then((function(s){a.hide();var n={};e.$ajax.getJSON("/api/get_structs",{id:e.selectedId,module_name:t[0],k8s:e.k8s}).then((function(t){s.forEach((function(a){if(!a.out)if("string"===a.type)n[a.name]="";else if("array"===a.type)n[a.name]=[];else if("object"===Object(v["a"])(a.type))if(a.type.vector)n[a.name]=[];else if(a.type.isEnum){n[a.name]={}}else a.type.isStruct&&(n[a.name]=e.parseFields(t.structs[a.type.name].fields));else n[a.name]=""})),e.inParam=JSON.stringify(n,null,4)}))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},doDebug:function(){var t=this,e=this.$Loading.show();this.$ajax.postJSON("/api/interface_test",{id:this.selectedId,k8s:this.k8s,application:this.serverData.application,server_name:this.serverData.server_name,file_name:this.selectedFileName,module_name:this.selectedMethods[0],interface_name:this.selectedMethods[1],function_name:this.selectedMethods[2],params:this.inParam,objName:this.objName}).then((function(a){e.hide(),t.outParam=JSON.stringify(JSON.parse(a),null,4)})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(a.message||a.err_msg))}))},deleteTestCase:function(t){var e=this;this.$confirm(this.$t("inf.dlg.deleteMsg"),this.$t("common.alert")).then((function(){var a=e.$Loading.show();e.$ajax.getJSON("/api/delete_test_case",{case_id:t,k8s:e.k8s}).then((function(t){a.hide(),setTimeout((function(){e.getTestCaseListInner()}),500)})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))})).catch((function(){}))},gotoAddTestCase:function(){this.addTestCase=!0,this.showCaseList=!1,this.selectedFileName=this.rowData.file_name,this.inParam="",this.outParam="",this.selectedId=this.rowData.f_id,this.objName="",this.testCastName="",this.selectedMethods=[],this.getContextData(this.rowData.f_id),this.getObjList()},getTestCaseListInner:function(){var t=this,e=this.$Loading.show();this.showDebug=!1,this.showCaseList=!0,this.modifyTestCase=!1,this.$ajax.getJSON("/api/get_testcase_list",{f_id:this.selectedId,application:this.serverData.application,server_name:this.serverData.server_name,k8s:this.k8s}).then((function(a){e.hide(),t.testCaseList=a.rows})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("get_testcase_list.failed"),": ").concat(a.err_msg||a.message))}))},getTestCaseList:function(t){this.rowData=t,this.showCaseList=!0,this.testCaseList=[],this.selectedFileName=t.file_name,this.inParam=null,this.outParam=null,this.selectedId=t.f_id,this.objName=null,this.priorSet=null,this.selectedMethods=[],this.getContextData(t.f_id),this.getObjList(),this.getTestCaseListInner(1)},getTestCaseByParams:function(t){this.selectedMethods=t,3==t.length&&this.getTestCaseListInner(1)},doAddTestCast:function(){var t=this,e=this.$Loading.show();this.$ajax.postJSON("/api/interface_add_testcase",{f_id:this.selectedId,application:this.serverData.application,server_name:this.serverData.server_name,file_name:this.selectedFileName,module_name:this.selectedMethods[0],interface_name:this.selectedMethods[1],function_name:this.selectedMethods[2],params:this.inParam,test_case_name:this.testCastName,objName:this.objName,k8s:this.k8s}).then((function(a){e.hide(),t.addTestCase=!1,setTimeout((function(){t.getTestCaseListInner()}),500)})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(a.message||a.err_msg))}))},getServerList:function(){var t=this,e=this.$Loading.show();this.k8s?this.$tars.getJSON("/k8s/api/pod_list",{tree_node_id:this.treeid}).then((function(a){e.hide();var s=a.Data||[];s.forEach((function(t){t.isChecked=!1,t.node_name=t.PodIp})),t.totalServerList=s})).catch((function(a){e.hide(),t.$confirm(a.err_msg||a.message||t.$t("serverList.table.msg.fail")).then((function(){t.getServerList()}))})):this.$tars.getJSON("/api/server_list",{tree_node_id:this.treeid}).then((function(a){e.hide();var s=a||[];s.forEach((function(t){t.isChecked=!1})),t.totalServerList=s})).catch((function(a){e.hide(),t.$confirm(a.err_msg||a.message||t.$t("serverList.table.msg.fail")).then((function(){t.getServerList()}))}))},gotoModify:function(t){this.modifyCaseItem=t,this.modifyTestCase=!0,this.showCaseList=!1,this.inParam=t.context,this.testCastName=t.test_case_name},doModifyTestCase:function(){var t=this,e=this.$Loading.show();this.$ajax.postJSON("/api/modify_test_case",{case_id:this.modifyCaseItem.case_id,params:this.inParam,test_case_name:this.testCastName,k8s:this.k8s}).then((function(a){e.hide(),t.modifyTestCase=!1,setTimeout((function(){t.getTestCaseListInner()}),500)})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(a.message||a.err_msg))}))},doInterfaceTest:function(t,e){var a=this;this.$ajax.postJSON("/api/interface_test",{id:this.selectedId,application:this.serverData.application,server_name:this.serverData.server_name,file_name:this.selectedFileName,module_name:e.module_name,interface_name:e.interface_name,function_name:e.function_name,params:e.context,objName:e.object_name+"@"+t[e.object_name],k8s:this.k8s}).then((function(t){a.debugModal.show=!0,a.debugModal.resultParam=JSON.stringify(JSON.parse(t),null,4)})).catch((function(t){a.debugModal.show=!0,a.debugModal.resultParam=t.message||t.err_msg}))},doNodedebug:function(t,e){var a=this,s=this.$Loading.show();this.k8s?this.$tars.getJSON("/k8s/api/pod_list",{tree_node_id:this.treeid}).then((function(n){s.hide(),n.Data.forEach((function(s){if(s.PodId==t.PodId){var n={};for(var r in s.Servant)console.log(r),n[r]=s.Servant[r];console.log(n),a.doInterfaceTest(n,e)}}))})).catch((function(t){s.hide(),a.$tip.error("".concat(a.$t("serverList.restart.failed"),": ").concat(t.err_msg||t.message))})):this.$tars.getJSON("/api/adapter_conf_list",{id:t.id}).then((function(t){s.hide();var n,r={},i=Object(W["a"])(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r[o.servant]=o.endpoint}}catch(l){i.e(l)}finally{i.f()}a.doInterfaceTest(r,e)})).catch((function(t){s.hide(),a.$tip.error("".concat(a.$t("serverList.restart.failed"),": ").concat(t.err_msg||t.message))}))},getParam:function(t){var e=null,a=!1;if(0==location.search.indexOf("?")&&location.search.indexOf("=")>1){var s=unescape(location.search).substring(1,location.search.length).split("&"),n=0;while(n<s.length&&!a)s[n].indexOf("=")>0&&s[n].split("=")[0].toLowerCase()==t.toLowerCase()&&(e=s[n].split("=")[1],a=!0),n++}return e},getServerData:function(){var t={level:5,application:"",server_name:"",set_name:"",set_area:"",set_group:""};if(!this.treeid)return{};var e=this.treeid.split(".");return e.forEach((function(e){var a=+e.substr(0,1),s=e.substr(1);switch(a){case 1:t.application=s;break;case 2:t.set_name=s;break;case 3:t.set_area=s;break;case 4:t.set_group=s;break;case 5:t.server_name=s;break;default:break}t.level=a})),t}},created:function(){},mounted:function(){this.treeid=this.getParam("treeid"),this.k8s="true"==this.getParam("k8s"),this.serverData=this.getServerData(),this.getObjList(),this.getFileList(),this.getServerList()}},mt=ht,pt=(a("045a"),Object(I["a"])(mt,z,A,!1,null,"a76247c0",null)),ft=pt.exports;s["default"].use(H["a"]);var gt=H["a"].prototype.push;H["a"].prototype.push=function(t){return gt.call(this,t).catch((function(t){return t}))};var bt=H["a"].prototype.replace;H["a"].prototype.replace=function(t){return bt.call(this,t).catch((function(t){return t}))};var vt=new H["a"]({routes:[{path:"/benchmark",name:"Benchmark",component:ft},{path:"*",redirect:"/benchmark"}],scrollBehavior:function(t,e,a){return{x:0,y:0}}}),_t=a("a925"),kt=a("f0d9"),Ct=a.n(kt),$t=a("b2d6"),wt=a.n($t);s["default"].use(_t["a"]),s["default"].use(r.a);var yt=new _t["a"]({});yt.setLocaleMessage("cn",Ct.a),yt.setLocaleMessage("en",wt.a);var xt=[];function Mt(){return new Promise((function(t,e){L.getJSON("/get_locale").then((function(e){var a=r.a.get("locale");if("[object Object]"==Object.prototype.toString.call(e)){for(var s in e)yt.mergeLocaleMessage(s,e[s]),xt.push({localeCode:s,localeName:e[s]["localeName"],localeMessages:e});a=e[a]?a:"cn",xt=e}yt.locale=a,t()})).catch((function(t){e(t)}))}))}s["default"].config.productionTip=!1,Mt.call(void 0).then((function(){s["default"].use(o.a,{i18n:function(t,e){return yt.t(t,e)}}),s["default"].use(r.a),new s["default"]({i18n:yt,el:"#app",router:vt,components:{indexApp:U},template:"<indexApp/>"})}))},b792:function(t,e,a){},d1d2:function(t,e,a){"use strict";var s=a("b792"),n=a.n(s);n.a}});